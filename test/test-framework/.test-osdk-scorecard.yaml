cr-manifest: "deploy/crds/cache_v1alpha1_memcached_cr.yaml"
init-timeout: 60
csv-path: "deploy/memcachedoperator.0.0.2.csv.yaml"
#proxy-image: "scorecard-proxy"
proxy-pull-policy: "Never"
functional_tests:
  - cr: "deploy/crds/cache_v1alpha1_memcached_cr.yaml"
    expected:
      resources:
        - apiVersion: apps/v1
          kind: Deployment
          metadata:
            name: example-memcached
          status:
            readyReplicas: 3
          spec:
            template:
              spec:
                containers:
                  - image: memcached:1.4.36-alpine
      status:
        scorecard_function_length:
          nodes: 3
    modifications:
      - spec:
          size: 4
          bleh:
            hello: world
          meArray:
            - test1: yo
            - test1: yo2
            - newmap:
                hello: world2
        expected:
          resources:
            - kind: Deployment
              name: "example_memcached"
              status:
                readyReplicas: 4
          status:
            scorecard_function_length:
              nodes: 4
      - spec:
          size: 4
          bleh:
            hello: new-world
          meArray:
            - test2: yo4
            - test1: yo3
            - newmap:
                hello: world3
        expected:
          resources:
            - kind: Deployment
              name: "example_memcached"
              status:
                readyReplicas: 4
          status:
            scorecard_function_length:
              nodes: 4
